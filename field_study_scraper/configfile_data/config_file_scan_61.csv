,commit_hash,file_path,filename,action,changes
0,3098be10b2f890eede83bd3499c9317a967c62b5,manager/deployer/src/main/resources/sql/otter-manager-schema.sql,otter-manager-schema.sql,5,"{'added': [(5, ""SET sql_mode='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';""), (6, '')], 'deleted': []}"
1,bf1f1b95c7e171a2941408089d0d9f51132ed0b5,node/canal/src/main/resources/spring/tsdb/sql-map/sqlmap_history.xml,sqlmap_history.xml,5,"{'added': [(39, '    <delete id=""deleteByTimestamp"" parameterClass=""java.util.Map"">'), (42, '\t\twhere destination=#destination# and binlog_timestamp < #timestamp#')], 'deleted': [(39, '    <delete id=""deleteByGmtModified"" parameterClass=""java.util.Map"">'), (42, '\t\twhere gmt_modified < timestamp(#timestamp#)')]}"
2,bf1f1b95c7e171a2941408089d0d9f51132ed0b5,node/canal/src/main/resources/spring/tsdb/sql-map/sqlmap_snapshot.xml,sqlmap_snapshot.xml,5,"{'added': [(45, '    <delete id=""deleteByTimestamp"" parameterClass=""java.util.Map"">'), (48, '\t\twhere destination=#destination# and binlog_timestamp < #timestamp# and binlog_timestamp > 0')], 'deleted': [(45, '    <delete id=""deleteByGmtModified"" parameterClass=""java.util.Map"">'), (48, '\t\twhere gmt_modified < timestamp(#timestamp#)')]}"
3,d71912695d4c39d70dbcab94c125a405be07eda8,manager/deployer/src/main/resources/webapp/WEB-INF/home/form.xml,form.xml,5,"{'added': [(846, '\t\t\t<field name=""gtidEnable"" displayName=""是否启用gtid位点"">'), (847, '\t\t\t\t<fm-validators:required-validator>'), (848, '\t\t\t\t\t<message>必须填写${displayName}</message>'), (849, '\t\t\t\t</fm-validators:required-validator>'), (850, '\t\t\t</field>'), (922, '\t\t\t<field name=""rdsAccesskey"" displayName=""rds accesskey"" />'), (923, '\t\t\t<field name=""rdsSecretkey"" displayName=""rds secretkey"" />'), (924, '\t\t\t<field name=""rdsInstanceId"" displayName=""rds instance"" />')], 'deleted': []}"
4,d71912695d4c39d70dbcab94c125a405be07eda8,manager/deployer/src/main/resources/webapp/templates/home/screen/addCanal.vm,addCanal.vm,5,"{'added': [(10, ""\t\t\tchangeDisplay('positionGtidConfig','table-row');""), (13, ""\t\t\tchangeDisplay('positionGtidConfig','none');""), (178, ''), (179, '\t  <tr class=""positionGtidConfig"">'), (180, '\t\t<th width=""300"">是否启用gtid位点：</th>'), (181, '        <td width=""329"">'), (182, '            <input type=""radio"" name=""$canalParameterGroup.gtidEnable.key"" value=""true"" id=""RadioGroup8_0_0"" #if($!canal.canalParameter.gtidEnable) checked=""checked"" #end class=""radio""/>是 &nbsp;'), (183, '            <input type=""radio"" name=""$canalParameterGroup.gtidEnable.key"" value=""false"" id=""RadioGroup8_1_0"" #if(!$!canal.canalParameter.gtidEnable) checked=""checked"" #end class=""radio""/>否 &nbsp;'), (184, '\t\t\t<br />'), (185, '\t\t\t<span class=""red"">#addCanalMessage ($canalParameterGroup.gtidEnable)</span>'), (186, '\t\t</td>'), (187, '      </tr>'), (210, ''), (211, '      <div id=""rdsConfig"">'), (212, '\t  <tr class=""rdsConfig"">'), (213, '        <th width=""300"">rds accesskey：</th>'), (214, '        <td width=""329"">'), (215, '            <input type=""text"" name=""$canalParameterGroup.rdsAccesskey.key"" value="""" class=""setting_input""/>'), (216, '\t\t\t<br />'), (217, '\t\t\t<span class=""red"">#addCanalMessage ($canalParameterGroup.rdsAccesskey)</span>'), (218, '\t\t</td>'), (219, '      </tr>'), (220, '      <tr class=""rdsConfig"">'), (221, '        <th width=""300"">rds secretkey：</th>'), (222, '        <td width=""329"">'), (223, '            <input type=""text"" name=""$canalParameterGroup.rdsSecretkey.key"" value="""" class=""setting_input""/>'), (224, '\t\t\t<br />'), (225, '\t\t\t<span class=""red"">#addCanalMessage ($canalParameterGroup.rdsSecretkey)</span>'), (226, '\t\t</td>'), (227, '      </tr>'), (228, '      <tr class=""rdsConfig"">'), (229, '        <th width=""300"">rds instanceId：</th>'), (230, '        <td width=""329"">'), (231, '            <input type=""text"" name=""$canalParameterGroup.rdsInstanceId.key"" value="""" class=""setting_input""/>'), (232, '\t\t\t<br />'), (233, '\t\t\t<span class=""red"">#addCanalMessage ($canalParameterGroup.rdsInstance)</span>'), (234, '\t\t</td>'), (235, '      </tr>'), (236, '\t  </div>')], 'deleted': [(176, ''), (188, '')]}"
5,d71912695d4c39d70dbcab94c125a405be07eda8,manager/deployer/src/main/resources/webapp/templates/home/screen/canalInfo.vm,canalInfo.vm,5,"{'added': [(56, '  <tr>'), (57, '  <th>是否启用gtid位点：</th><td>$!canal.canalParameter.gtidEnable</td>'), (58, '  </tr>'), (59, ''), (67, ''), (68, '  <tr>'), (69, '  <th>rds accesskey：</th><td>$!canal.canalParameter.rdsAccesskey</td>'), (70, '  </tr>'), (71, ''), (72, '  <tr>'), (73, '  <th>rds secretkey：</th><td>$!canal.canalParameter.rdsSecretkey</td>'), (74, '  </tr>'), (75, ''), (76, '  <tr>'), (77, '  <th>rds instanceId：</th><td>$!canal.canalParameter.rdsInstance</td>'), (78, '  </tr>')], 'deleted': []}"
6,d71912695d4c39d70dbcab94c125a405be07eda8,manager/deployer/src/main/resources/webapp/templates/home/screen/editCanal.vm,editCanal.vm,5,"{'added': [(10, ""\t\t\tchangeDisplay('positionGtidConfig','table-row');""), (13, ""\t\t\tchangeDisplay('positionGtidConfig','none');""), (185, '      <tr class=""positionGtidConfig"">'), (186, '\t\t<th width=""300"">是否启用gtid位点：</th>'), (187, '        <td width=""329"">'), (188, '            <input type=""radio"" name=""$canalParameterGroup.gtidEnable.key"" value=""true"" id=""RadioGroup8_0_0"" #if($!canal.canalParameter.gtidEnable) checked=""checked"" #end class=""radio""/>是 &nbsp;'), (189, '            <input type=""radio"" name=""$canalParameterGroup.gtidEnable.key"" value=""false"" id=""RadioGroup8_1_0"" #if(!$!canal.canalParameter.gtidEnable) checked=""checked"" #end class=""radio""/>否 &nbsp;'), (190, '\t\t\t<br />'), (191, '\t\t\t<span class=""red"">#editCanalMessage ($canalParameterGroup.gtidEnable)</span>'), (192, '\t\t</td>'), (193, '      </tr>'), (215, '      </div>'), (216, ''), (217, '      <div id=""rdsConfig"">'), (218, '\t  <tr class=""rdsConfig"">'), (219, '        <th width=""300"">rds accesskey：</th>'), (220, '        <td width=""329"">'), (221, '            <input type=""text"" name=""$canalParameterGroup.rdsAccesskey.key"" value=""$!canal.canalParameter.rdsAccesskey"" class=""setting_input""/>'), (222, '\t\t\t<br />'), (223, '\t\t\t<span class=""red"">#editCanalMessage ($canalParameterGroup.rdsAccesskey)</span>'), (224, '\t\t</td>'), (225, '      </tr>'), (226, '       <tr class=""rdsConfig"">'), (227, '        <th width=""300"">rds secretkey：</th>'), (228, '        <td width=""329"">'), (229, '            <input type=""text"" name=""$canalParameterGroup.rdsSecretkey.key"" value=""$!canal.canalParameter.rdsSecretkey"" class=""setting_input""/>'), (230, '\t\t\t<br />'), (231, '\t\t\t<span class=""red"">#editCanalMessage ($canalParameterGroup.rdsSecretkey)</span>'), (232, '\t\t</td>'), (233, '      </tr>'), (234, '       <tr class=""rdsConfig"">'), (235, '        <th width=""300"">rds instanceId：</th>'), (236, '        <td width=""329"">'), (237, '            <input type=""text"" name=""$canalParameterGroup.rdsInstanceId.key"" value=""$!canal.canalParameter.rdsInstanceId"" class=""setting_input""/>'), (238, '\t\t\t<br />'), (239, '\t\t\t<span class=""red"">#editCanalMessage ($canalParameterGroup.rdsInstanceId)</span>'), (240, '\t\t</td>'), (241, '      </tr>')], 'deleted': []}"
7,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,manager/biz/src/main/resources/spring/otter-manager-remote.xml,otter-manager-remote.xml,5,"{'added': [(79, '\t\t<property name=""tsdbJdbcUrl"" value=""${otter.database.driver.url}"" />'), (80, '\t\t<property name=""tsdbJdbcUserName"" value=""${otter.database.driver.username}"" />'), (81, '\t\t<property name=""tsdbJdbcPassword"" value=""${otter.database.driver.password}"" />')], 'deleted': []}"
8,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,manager/deployer/src/main/resources/sql/otter-manager-schema.sql,otter-manager-schema.sql,5,"{'added': [(256, 'CREATE TABLE IF NOT EXISTS `meta_history` ('), (257, ""  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',""), (258, ""  `gmt_create` datetime NOT NULL COMMENT '创建时间',""), (259, ""  `gmt_modified` datetime NOT NULL COMMENT '修改时间',""), (260, ""  `destination` varchar(128) DEFAULT NULL COMMENT '通道名称',""), (261, ""  `binlog_file` varchar(64) DEFAULT NULL COMMENT 'binlog文件名',""), (262, ""  `binlog_offest` bigint(20) DEFAULT NULL COMMENT 'binlog偏移量',""), (263, ""  `binlog_master_id` varchar(64) DEFAULT NULL COMMENT 'binlog节点id',""), (264, ""  `binlog_timestamp` bigint(20) DEFAULT NULL COMMENT 'binlog应用的时间戳',""), (265, ""  `use_schema` varchar(1024) DEFAULT NULL COMMENT '执行sql时对应的schema',""), (266, ""  `sql_schema` varchar(1024) DEFAULT NULL COMMENT '对应的schema',""), (267, ""  `sql_table` varchar(1024) DEFAULT NULL COMMENT '对应的table',""), (268, ""  `sql_text` longtext DEFAULT NULL COMMENT '执行的sql',""), (269, ""  `sql_type` varchar(256) DEFAULT NULL COMMENT 'sql类型',""), (270, ""  `extra` text DEFAULT NULL COMMENT '额外的扩展信息',""), (271, '  PRIMARY KEY (`id`),'), (272, '  UNIQUE KEY binlog_file_offest(`destination`,`binlog_master_id`,`binlog_file`,`binlog_offest`),'), (273, '  KEY `destination` (`destination`),'), (274, '  KEY `destination_timestamp` (`destination`,`binlog_timestamp`),'), (275, '  KEY `gmt_modified` (`gmt_modified`)'), (276, "") ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='表结构变化明细表';""), (277, ''), (278, 'CREATE TABLE IF NOT EXISTS `meta_snapshot` ('), (279, ""  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',""), (280, ""  `gmt_create` datetime NOT NULL COMMENT '创建时间',""), (281, ""  `gmt_modified` datetime NOT NULL COMMENT '修改时间',""), (282, ""  `destination` varchar(128) DEFAULT NULL COMMENT '通道名称',""), (283, ""  `binlog_file` varchar(64) DEFAULT NULL COMMENT 'binlog文件名',""), (284, ""  `binlog_offest` bigint(20) DEFAULT NULL COMMENT 'binlog偏移量',""), (285, ""  `binlog_master_id` varchar(64) DEFAULT NULL COMMENT 'binlog节点id',""), (286, ""  `binlog_timestamp` bigint(20) DEFAULT NULL COMMENT 'binlog应用的时间戳',""), (287, ""  `data` longtext DEFAULT NULL COMMENT '表结构数据',""), (288, ""  `extra` text DEFAULT NULL COMMENT '额外的扩展信息',""), (289, '  PRIMARY KEY (`id`),'), (290, '  UNIQUE KEY binlog_file_offest(`destination`,`binlog_master_id`,`binlog_file`,`binlog_offest`),'), (291, '  KEY `destination` (`destination`),'), (292, '  KEY `destination_timestamp` (`destination`,`binlog_timestamp`),'), (293, '  KEY `gmt_modified` (`gmt_modified`)'), (294, "") ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='表结构记录表快照表';""), (295, '')], 'deleted': []}"
9,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,manager/deployer/src/main/resources/webapp/WEB-INF/home/form.xml,form.xml,5,"{'added': [(841, '\t\t\t<field name=""tsdbEnable"" displayName=""是否开启表结构tsdb"">'), (842, '\t\t\t\t<fm-validators:required-validator>'), (843, '\t\t\t\t\t<message>必须填写${displayName}</message>'), (844, '\t\t\t\t</fm-validators:required-validator>'), (845, '\t\t\t</field>')], 'deleted': []}"
10,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,manager/deployer/src/main/resources/webapp/templates/home/screen/addCanal.vm,addCanal.vm,5,"{'added': [(188, ''), (189, '\t  <div id=""tsdbConfig"">'), (190, '\t  <tr>'), (191, '\t\t<th width=""300"">是否开启表结构TSDB：</th>'), (192, '        <td width=""329"">'), (193, '            <input type=""radio"" name=""$canalParameterGroup.tsdbEnable.key"" value=""true"" id=""RadioGroup8_0_0"" #if($!canal.canalParameter.tsdbEnable) checked=""checked"" #end class=""radio""/>是 &nbsp;'), (194, '            <input type=""radio"" name=""$canalParameterGroup.tsdbEnable.key"" value=""false"" id=""RadioGroup8_1_0"" #if(!$!canal.canalParameter.tsdbEnable) checked=""checked"" #end class=""radio""/>否 &nbsp;'), (195, '\t\t\t<br />'), (196, '\t\t\t<span class=""red"">#addCanalMessage ($canalParameterGroup.tsdbEnable)</span>'), (197, '\t\t</td>'), (198, '      </tr>'), (199, '      </div>'), (200, '')], 'deleted': []}"
11,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,manager/deployer/src/main/resources/webapp/templates/home/screen/addPipeline.vm,addPipeline.vm,5,"{'added': [(331, '              <input type=""radio"" name=""$pipelineParameterGroup.useTableTransform.key"" value=""true"" id=""RadioGroup1_2"" class=""radio""/>是'), (332, '              <input type=""radio"" name=""$pipelineParameterGroup.useTableTransform.key"" value=""false"" id=""RadioGroup1_3"" checked=""checked"" class=""radio""/>否')], 'deleted': [(331, '              <input type=""radio"" name=""$pipelineParameterGroup.useTableTransform.key"" value=""true"" id=""RadioGroup1_2"" checked=""checked"" class=""radio""/>是'), (332, '              <input type=""radio"" name=""$pipelineParameterGroup.useTableTransform.key"" value=""false"" id=""RadioGroup1_3"" class=""radio""/>否')]}"
12,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,manager/deployer/src/main/resources/webapp/templates/home/screen/canalInfo.vm,canalInfo.vm,5,"{'added': [(60, '  <tr>'), (61, '  <th>是否开启表结构TSDB：</th><td>$!canal.canalParameter.tsdbEnable</td>'), (62, '  </tr>'), (63, '')], 'deleted': []}"
13,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,manager/deployer/src/main/resources/webapp/templates/home/screen/editCanal.vm,editCanal.vm,5,"{'added': [(182, ''), (194, '\t  <div id=""tsdbConfig"">'), (195, '\t  <tr>'), (196, '\t\t<th width=""300"">是否开启表结构TSDB：</th>'), (197, '        <td width=""329"">'), (198, '            <input type=""radio"" name=""$canalParameterGroup.tsdbEnable.key"" value=""true"" id=""RadioGroup8_0_0"" #if($!canal.canalParameter.tsdbEnable) checked=""checked"" #end class=""radio""/>是 &nbsp;'), (199, '            <input type=""radio"" name=""$canalParameterGroup.tsdbEnable.key"" value=""false"" id=""RadioGroup8_1_0"" #if(!$!canal.canalParameter.tsdbEnable) checked=""checked"" #end class=""radio""/>否 &nbsp;'), (200, '\t\t\t<br />'), (201, '\t\t\t<span class=""red"">#editCanalMessage ($canalParameterGroup.tsdbEnable)</span>'), (202, '\t\t</td>'), (203, '      </tr>'), (204, '      </div>'), (205, '')], 'deleted': [(182, '')]}"
14,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,node/canal/src/main/resources/spring/tsdb/mysql-tsdb.xml,mysql-tsdb.xml,1,"{'added': [(1, '<?xml version=""1.0"" encoding=""UTF-8""?>'), (2, '<beans xmlns=""http://www.springframework.org/schema/beans""'), (3, '\txmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:tx=""http://www.springframework.org/schema/tx""'), (4, '\txmlns:aop=""http://www.springframework.org/schema/aop"" xmlns:lang=""http://www.springframework.org/schema/lang""'), (5, '\txmlns:context=""http://www.springframework.org/schema/context""'), (6, '\txsi:schemaLocation=""http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd'), (7, '           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd'), (8, '           http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.0.xsd'), (9, '           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd'), (10, '           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd""'), (11, '\tdefault-autowire=""byName"">'), (12, ''), (13, '\t<!-- properties -->'), (14, '\t<bean class=""com.alibaba.otter.canal.instance.spring.support.PropertyPlaceholderConfigurer"" lazy-init=""false"">'), (15, '\t\t<property name=""ignoreResourceNotFound"" value=""true"" />'), (16, '\t\t<property name=""systemPropertiesModeName"" value=""SYSTEM_PROPERTIES_MODE_OVERRIDE""/><!-- 允许system覆盖 -->'), (17, '\t\t<property name=""locationNames"">'), (18, '\t\t\t<list>'), (19, '\t\t\t\t<value>classpath:canal.properties</value>'), (20, '\t\t\t\t<value>classpath:${canal.instance.destination:}/instance.properties</value>'), (21, '\t\t\t</list>'), (22, '\t\t</property>'), (23, '\t</bean>'), (24, ''), (25, '\t<!-- 基于db的实现 -->'), (26, '\t<bean id=""tableMetaTSDB"" class=""com.alibaba.otter.canal.parse.inbound.mysql.tsdb.DatabaseTableMeta"">'), (27, '\t\t<property name=""metaHistoryDAO"" ref=""metaHistoryDAO""/>'), (28, '\t\t<property name=""metaSnapshotDAO"" ref=""metaSnapshotDAO""/>'), (29, '\t</bean>'), (30, ''), (31, '    <bean id=""dataSource"" class=""com.alibaba.druid.pool.DruidDataSource"" destroy-method=""close"">'), (32, '        <property name=""driverClassName"" value=""com.mysql.jdbc.Driver"" />'), (33, '\t\t<property name=""url"" value=""${canal.instance.tsdb.url:}"" />'), (34, '\t\t<property name=""username"" value=""${canal.instance.tsdb.dbUsername:}"" />'), (35, '\t\t<property name=""password"" value=""${canal.instance.tsdb.dbPassword:}"" />'), (36, '        <property name=""maxActive"" value=""30"" />'), (37, '        <property name=""initialSize"" value=""0"" />'), (38, '        <property name=""minIdle"" value=""1"" />'), (39, '        <property name=""maxWait"" value=""10000"" />'), (40, '        <property name=""timeBetweenEvictionRunsMillis"" value=""60000"" />'), (41, '        <property name=""minEvictableIdleTimeMillis"" value=""300000"" />'), (42, '        <property name=""validationQuery"" value=""SELECT 1"" />'), (43, '        <property name=""exceptionSorterClassName"" value=""com.alibaba.druid.pool.vendor.MySqlExceptionSorter"" />'), (44, '        <property name=""validConnectionCheckerClassName"" value=""com.alibaba.druid.pool.vendor.MySqlValidConnectionChecker"" />'), (45, '        <property name=""testWhileIdle"" value=""true"" />'), (46, '        <property name=""testOnBorrow"" value=""false"" />'), (47, '        <property name=""testOnReturn"" value=""false"" />'), (48, '        <property name=""useUnfairLock"" value=""true"" />'), (49, '\t</bean>'), (50, ''), (51, '    <bean id=""sqlMapClient"" class=""org.springframework.orm.ibatis.SqlMapClientFactoryBean"">'), (52, '        <property name=""dataSource"" ref=""dataSource""/>'), (53, '        <property name=""configLocation"" value=""classpath:spring/tsdb/sql-map/sqlmap-config.xml""/>'), (54, '    </bean>'), (55, ''), (56, '    <bean id=""metaHistoryDAO"" class=""com.alibaba.otter.canal.parse.inbound.mysql.tsdb.dao.MetaHistoryDAO"">'), (57, '        <property name=""sqlMapClient"" ref=""sqlMapClient""/>'), (58, '    </bean>'), (59, ''), (60, '    <bean id=""metaSnapshotDAO"" class=""com.alibaba.otter.canal.parse.inbound.mysql.tsdb.dao.MetaSnapshotDAO"">'), (61, '        <property name=""sqlMapClient"" ref=""sqlMapClient""/>'), (62, '    </bean>'), (63, '</beans>')], 'deleted': []}"
15,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,node/canal/src/main/resources/spring/tsdb/sql-map/sqlmap-config.xml,sqlmap-config.xml,1,"{'added': [(1, '<?xml version=""1.0"" encoding=""UTF-8"" ?>'), (2, '<!DOCTYPE sqlMapConfig PUBLIC ""-//iBATIS.com//DTD SQL Map Config 2.0//EN""'), (3, '        ""http://www.ibatis.com/dtd/sql-map-config-2.dtd"">'), (4, '<sqlMapConfig>'), (5, '    <settings useStatementNamespaces=""true""/>'), (6, '    <sqlMap resource=""spring/tsdb/sql-map/sqlmap_history.xml""/>'), (7, '    <sqlMap resource=""spring/tsdb/sql-map/sqlmap_snapshot.xml""/>'), (8, '</sqlMapConfig>')], 'deleted': []}"
16,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,node/canal/src/main/resources/spring/tsdb/sql-map/sqlmap_history.xml,sqlmap_history.xml,1,"{'added': [(1, '<?xml version=""1.0"" encoding=""UTF-8"" ?>'), (2, '<!DOCTYPE sqlMap PUBLIC ""-//ibatis.apache.org//DTD SQL Map 2.0//EN"" ""http://ibatis.apache.org/dtd/sql-map-2.dtd"" >'), (3, '<sqlMap namespace=""meta_history"">'), (4, '    <typeAlias alias=""metaHistoryDO"" type=""com.alibaba.otter.canal.parse.inbound.mysql.tsdb.dao.MetaHistoryDO""/>'), (5, '    <sql id=""allColumns"">'), (6, '        <![CDATA['), (7, '\t\tgmt_create,gmt_modified,destination,binlog_file,binlog_offest,binlog_master_id,binlog_timestamp,use_schema,sql_schema,sql_table,sql_text,sql_type,extra'), (8, '        ]]>'), (9, '    </sql>'), (10, '    <sql id=""allVOColumns"">'), (11, '        <![CDATA['), (12, '\t\ta.id as id,a.gmt_create as gmtCreate,a.gmt_modified as gmtModified,'), (13, '\t\ta.destination as destination,a.binlog_file as binlogFile,a.binlog_offest as binlogOffest,a.binlog_master_id as binlogMasterId,a.binlog_timestamp as binlogTimestamp,'), (14, '\t\ta.use_schema as useSchema,a.sql_schema as sqlSchema,a.sql_table as sqlTable,a.sql_text as sqlText,a.sql_type as sqlType,a.extra as extra'), (15, '        ]]>'), (16, '    </sql>'), (17, ''), (18, '    <select id=""findByTimestamp"" parameterClass=""java.util.Map"" resultClass=""metaHistoryDO"">'), (19, '        select'), (20, '        <include refid=""allVOColumns""/>'), (21, '        from meta_history a'), (22, '        <![CDATA['), (23, '        where destination = #destination# and binlog_timestamp >= #snapshotTimestamp# and binlog_timestamp <= #timestamp#'), (24, '        order by binlog_timestamp asc,id asc'), (25, '        ]]>'), (26, '    </select>'), (27, ''), (28, '    <insert id=""insert"" parameterClass=""metaHistoryDO"">'), (29, '        insert into meta_history (<include refid=""allColumns""/>)'), (30, '        values(CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,#destination#,#binlogFile#,#binlogOffest#,#binlogMasterId#,#binlogTimestamp#,#useSchema#,#sqlSchema#,#sqlTable#,#sqlText#,#sqlType#,#extra#)'), (31, '    </insert>'), (32, ''), (33, '    <delete id=""deleteByName"" parameterClass=""java.util.Map"">'), (34, '        delete from meta_history'), (35, '        where destination=#destination#'), (36, '    </delete>'), (37, ''), (38, ''), (39, '    <delete id=""deleteByGmtModified"" parameterClass=""java.util.Map"">'), (40, '        <![CDATA['), (41, '\t\tdelete from meta_history'), (42, '\t\twhere gmt_modified < timestamp(#timestamp#)'), (43, '        ]]>'), (44, '    </delete>'), (45, '</sqlMap>')], 'deleted': []}"
17,7cc897131da65aab2c1aa31b7b0b8aa7a6f65745,node/canal/src/main/resources/spring/tsdb/sql-map/sqlmap_snapshot.xml,sqlmap_snapshot.xml,1,"{'added': [(1, '<?xml version=""1.0"" encoding=""UTF-8"" ?>'), (2, '<!DOCTYPE sqlMap PUBLIC ""-//ibatis.apache.org//DTD SQL Map 2.0//EN"" ""http://ibatis.apache.org/dtd/sql-map-2.dtd"" >'), (3, '<sqlMap namespace=""meta_snapshot"">'), (4, '    <typeAlias alias=""metaSnapshotDO"" type=""com.alibaba.otter.canal.parse.inbound.mysql.tsdb.dao.MetaSnapshotDO""/>'), (5, '    <typeAlias alias=""tableMetaSnapshotDO""'), (6, '               type=""com.alibaba.middleware.jingwei.biz.dataobject.CanalTableMetaSnapshotDO""/>'), (7, '    <sql id=""allColumns"">'), (8, '        <![CDATA['), (9, '\t\tgmt_create,gmt_modified,destination,binlog_file,binlog_offest,binlog_master_id,binlog_timestamp,data,extra'), (10, '        ]]>'), (11, '    </sql>'), (12, '    <sql id=""allVOColumns"">'), (13, '        <![CDATA['), (14, '\t\ta.id as id,a.gmt_create as gmtCreate,a.gmt_modified as gmtModified,'), (15, '\t\ta.destination as destination,a.binlog_file as binlogFile,a.binlog_offest as binlogOffest,a.binlog_master_id as binlogMasterId,a.binlog_timestamp as binlogTimestamp,a.data as data,a.extra as extra'), (16, '        ]]>'), (17, '    </sql>'), (18, ''), (19, '    <select id=""findByTimestamp"" parameterClass=""java.util.Map"" resultClass=""metaSnapshotDO"">'), (20, '    \tselect <include refid=""allVOColumns""/>'), (21, '    \t<![CDATA['), (22, '        from meta_snapshot a'), (23, '        where destination = #destination# and binlog_timestamp < #timestamp#'), (24, '        order by binlog_timestamp desc,id desc'), (25, '        limit 1'), (26, '        ]]>'), (27, '    </select>'), (28, ''), (29, '    <insert id=""insert"" parameterClass=""metaSnapshotDO"">'), (30, '        insert into meta_snapshot (<include refid=""allColumns""/>)'), (31, '        values(CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,#destination#,#binlogFile#,#binlogOffest#,#binlogMasterId#,#binlogTimestamp#,#data#,#extra#)'), (32, '    </insert>'), (33, ''), (34, '    <update id=""update"" parameterClass=""metaSnapshotDO"">'), (35, '        update meta_snapshot set gmt_modified=now(),'), (36, '        binlog_file=#binlogFile#,binlog_offest=#binlogOffest#,binlog_master_id=#binlogMasterId#,binlog_timestamp=#binlogTimestamp#,data=#data#,extra=#extra#'), (37, '        where destination=#destination# and binlog_timestamp=0'), (38, '    </update>'), (39, ''), (40, ' \t<delete id=""deleteByName"" parameterClass=""java.util.Map"">'), (41, '        delete from meta_snapshot'), (42, '        where destination=#destination#'), (43, '    </delete>'), (44, ''), (45, '    <delete id=""deleteByGmtModified"" parameterClass=""java.util.Map"">'), (46, '        <![CDATA['), (47, '\t\tdelete from meta_snapshot'), (48, '\t\twhere gmt_modified < timestamp(#timestamp#)'), (49, '        ]]>'), (50, '    </delete>'), (51, '</sqlMap>')], 'deleted': []}"
18,a1febcb652b0eac086885ce6b6870d9de679ee78,manager/deployer/src/main/resources/webapp/templates/home/screen/addDataMedia.vm,addDataMedia.vm,5,"{'added': [(40, '        <th width=""300"">schema name：</th>')], 'deleted': [(40, '        <th width=""300"">schmea name：</th>')]}"
19,d11ccaba77c1204c8e64b77bb83af6e66a5864f6,manager/deployer/src/main/resources/webapp/css/commons.css,commons.css,5,"{'added': [(661, ' PADDING-RIGHT: 0.2em; PADDING-LEFT: 0.2em; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; TEXT-ALIGN: center'), (662, '}')], 'deleted': [(661, ' PADDING-RIGHT: 0.2em; PADDING-LEFT: 0.2em; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; TEXT-ALIGN: center')]}"
20,98613f1c7bae3f40883588b174231996ef23c986,manager/biz/src/main/resources/spring/otter-manager-remote.xml,otter-manager-remote.xml,5,"{'added': [(33, '\t\t<property name=""payload"" value=""${otter.communication.payload:8388608}"" />'), (38, '\t\t\t<bean class=""com.alibaba.otter.shared.communication.core.impl.dubbo.DubboCommunicationConnectionFactory"">'), (39, '\t\t\t\t<property name=""payload"" value=""${otter.communication.payload:8388608}"" />'), (40, '\t\t\t</bean>'), (43, '')], 'deleted': [(37, '\t\t\t<bean class=""com.alibaba.otter.shared.communication.core.impl.dubbo.DubboCommunicationConnectionFactory"" />'), (40, '')]}"
21,98613f1c7bae3f40883588b174231996ef23c986,manager/deployer/src/main/resources/otter.properties,otter.properties,5,"{'added': [(17, '## otter communication payload size (default = 8388608)'), (18, 'otter.communication.payload = 8388608'), (19, '')], 'deleted': []}"
22,98613f1c7bae3f40883588b174231996ef23c986,node/canal/src/main/resources/spring/otter-canal-communication.xml,otter-canal-communication.xml,5,"{'added': [(25, '\t\t\t<bean class=""com.alibaba.otter.shared.communication.core.impl.dubbo.DubboCommunicationConnectionFactory"">'), (26, '\t\t\t\t<property name=""payload"" value=""${otter.communication.payload:8388608}"" />'), (27, '\t\t\t</bean>'), (30, '')], 'deleted': [(25, '\t\t\t<bean class=""com.alibaba.otter.shared.communication.core.impl.dubbo.DubboCommunicationConnectionFactory"" />'), (28, '')]}"
23,98613f1c7bae3f40883588b174231996ef23c986,node/common/src/main/resources/spring/otter-node-communication.xml,otter-node-communication.xml,5,"{'added': [(27, '\t<bean id=""endpoint"" class=""com.alibaba.otter.shared.communication.core.impl.dubbo.DubboCommunicationEndpoint"">'), (28, '\t\t<property name=""payload"" value=""${otter.communication.payload:8388608}"" />'), (29, '\t</bean>'), (33, '\t\t\t<bean class=""com.alibaba.otter.shared.communication.core.impl.dubbo.DubboCommunicationConnectionFactory"">'), (34, '\t\t\t\t<property name=""payload"" value=""${otter.communication.payload:8388608}"" />'), (35, '\t\t\t</bean>'), (39, '')], 'deleted': [(27, '\t<bean id=""endpoint"" class=""com.alibaba.otter.shared.communication.core.impl.dubbo.DubboCommunicationEndpoint"" />'), (31, '\t\t\t<bean class=""com.alibaba.otter.shared.communication.core.impl.dubbo.DubboCommunicationConnectionFactory"" />'), (35, '')]}"
24,98613f1c7bae3f40883588b174231996ef23c986,node/deployer/src/main/resources/otter.properties,otter.properties,5,"{'added': [(12, '## otter communication payload size (default = 8388608)'), (13, 'otter.communication.payload = 8388608'), (14, '')], 'deleted': []}"
25,98613f1c7bae3f40883588b174231996ef23c986,shared/arbitrate/src/main/resources/spring/otter-arbitrate-communication.xml,otter-arbitrate-communication.xml,5,"{'added': [(15, '\t\t\t<bean class=""com.alibaba.otter.shared.communication.core.impl.dubbo.DubboCommunicationConnectionFactory"">'), (16, '\t\t\t\t<property name=""payload"" value=""${otter.communication.payload:8388608}"" />'), (17, '\t\t\t</bean>')], 'deleted': [(15, '\t\t\t<bean class=""com.alibaba.otter.shared.communication.core.impl.dubbo.DubboCommunicationConnectionFactory"" />')]}"
26,6dc5af320bbed12c6b2905717cb2239f23f0a714,manager/deployer/src/main/resources/sql/otter-manager-schema.sql,otter-manager-schema.sql,5,"{'added': [(113, '  `DELAY_TIME` bigint(20) NOT NULL,')], 'deleted': [(113, '  `DELAY_TIME` int(21) NOT NULL,')]}"
27,252e3a9ad7088a537889393fcc7465d548407ef9,manager/deployer/src/main/resources/webapp/templates/home/screen/editCanal.vm,editCanal.vm,5,"{'added': [(406, '        <th width=""300"">receiveBufferSize：</th>'), (415, '        <th width=""300"">sendBufferSize：</th>')], 'deleted': [(406, '        <th width=""300"">snedBufferSize：</th>'), (415, '        <th width=""300"">receiveBufferSize：</th>')]}"
28,b79c749606c154b681e1201af3e9b11c2a451e37,manager/biz/src/main/resources/spring/otter-manager-monitor.xml,otter-manager-monitor.xml,5,"{'added': [(18, '     \t<property name=""enable"" value=""${otter.manager.monitor.self.enable:true}"" />'), (19, '     \t<property name=""interval"" value=""${otter.manager.monitor.self.interval:120}"" />')], 'deleted': [(18, '     \t<property name=""enable"" value=""${otter.manager.self.monitor.enable:true}"" />'), (19, '     \t<property name=""interval"" value=""${otter.manager.self.monitor.interval:120}"" />')]}"
29,2d51960b6b68ed6b4066178eb7b2c08711c63ed9,manager/biz/src/main/resources/sqlmap/sqlmap-mapping-datamatrix.xml,sqlmap-mapping-datamatrix.xml,5,"{'added': [(60, '    <select id=""findDataMatrixByGroupKey"" parameterClass=""string"" resultMap=""dataMatrixResult"">')], 'deleted': [(60, '    <select id=""findDataMatrixByGroupKey"" parameterClass=""string"" resultClass=""dataMatrix"">')]}"
30,ee28a4eb08eb94acbe3484f77096c331fd6f9833,manager/deployer/src/main/resources/sql/otter-manager-schema.sql,otter-manager-schema.sql,5,"{'added': [(258, ""insert into USER(ID,USERNAME,PASSWORD,AUTHORIZETYPE,DEPARTMENT,REALNAME,GMT_CREATE,GMT_MODIFIED) values(null,'guest','471e02a154a2121dc577','OPERATOR','guest','guest',now(),now());"")], 'deleted': [(134, '  KEY `pipeline_id_record` (`PIPELINE_ID`),'), (259, ""insert into USER(ID,USERNAME,PASSWORD,AUTHORIZETYPE,DEPARTMENT,REALNAME,GMT_CREATE,GMT_MODIFIED) values(null,'guest','471e02a154a2121dc577','OPERATOR','guest','guest',now(),now());"")]}"
31,12e04ac3903b38518642b6f926949f5bf7d250bc,manager/deployer/src/main/resources/webapp/js/dbCheck.js,dbCheck.js,5,"{'added': [(37, '}'), (38, ''), (39, 'function changeform(){'), (40, '}')], 'deleted': [(37, '}')]}"
32,69309feb0275ce4acdb5a7cc6a4f83365dcc7880,manager/deployer/src/main/resources/webapp/templates/home/screen/alarmSystemList.vm,alarmSystemList.vm,5,"{'added': [(128, '\t\t\t\t\t\t\t#set ($removeURL = $homeModule.setAction(""AlarmRuleAction"").addQueryData(""alarmRuleId"", $alarmRule.id).addQueryData(""pipelineId"",$alarmRule.pipelineId).addQueryData(""eventSubmitDoDelete"", ""true"").render())')], 'deleted': [(128, '\t\t\t\t\t\t\t#set ($removeURL = $homeModule.setAction(""AlarmRuleAction"").addQueryData(""alarmRuleId"", $alarmRule.id).addQueryData(""pipelineId"",$pipelineId).addQueryData(""eventSubmitDoDelete"", ""true"").render())')]}"
33,c227cbd986f63d08046b8af8a5ac397a47e3ea55,manager/deployer/src/main/resources/webapp/templates/home/screen/addDataSource.vm,addDataSource.vm,5,"{'added': [(87, '\t\t\t\t<option value=""UTF8MB4"" #if($!dataMediaSourceGroup.encode.value == \'UTF8MB4\') selected  #end>UTF8MB4</option>')], 'deleted': []}"
34,c227cbd986f63d08046b8af8a5ac397a47e3ea55,manager/deployer/src/main/resources/webapp/templates/home/screen/editDataSource.vm,editDataSource.vm,5,"{'added': [(91, '\t\t\t\t<option value=""UTF8MB4"" #if($!source.encode == \'UTF8MB4\') selected  #end>UTF8MB4</option>')], 'deleted': []}"
